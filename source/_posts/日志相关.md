---
title: 日志相关
date: 2018-05-23 15:39:35
tags: log
categories: 日志
---

#### 日志相关的类

#### Logger.getLogger和 LogFactory.getLog 

Logger来自log4j自己的包。如果用Logger.getLogger，需要一个log4j的jar包，用此方式你只能依靠log4；

而LogFactory来自common-logging包。如果用LogFactory.getLog，你可以用任何实现了通用日志接口的日志记录器替换log4j，而程序不受影响。apache的common-logging包是通用日志接口，通过这个中间层，你可以随便指定到底用哪个日志系统。增加系统的灵活性。若log4j它不存在, commons-logging 会另行选择其它的日志实现类。 这样保证了程序中不一定要使用log4j这个日志文件了 

增强灵活性的理由：   

1. 首先在classpath下寻找自己的配置文件commons-logging.properties，如果找到，则使用其中定义的Log实现类；
2. 如果找不到commons-logging.properties  文件，则再查找是否已定义系统环境变量  org.apache.commons.logging.Log ，找到则使用其定义的 Log 实现类；  
3. 否则，查看 classpath 中是否有 Log4j 的包，如果发现，则自动使用 Log4j 作为日志实现类；  
4.  否则，使用 JDK 自身的日志实现类（ JDK1.4 以后才有日志实现类）；  
5. 否则，使用 commons-logging 自己提供的一个简单的日志实现类 SimpleLog ；  

为了简化配置 commons-logging ，一般不使用 commons-logging 的配置文件，也不设置与 commons-logging 相关的系统环境变量，而只需将 Log4j 的 Jar 包放置到 classpash 中就可以了。这样就很简单地完成了 commons-logging 与 Log4j 的融合。   



根据不同的性质，日志信息通常被分成不同的级别，从低到高依次是：“调试（ DEBUG ）”“信息（ INFO ）”“警告（ WARN ）”“错误（ERROR ）”“致命错误（ FATAL ）”。   





commons-logging 仅仅对 Log4j( 当然还包括其它 LOG 实现 ) 作了一层包装，具体的日志输出还是在内部转交给身后的 Log4j 来处理，还有log4j会默认的去classes目录下去寻找log4j.properties 文件

 



apache common logging是一种log的框架接口,它本身并不实现log记录的功能,而是在运行时动态查找目前存在的日志库,调用相关的日志函数,从而隐藏具体的日志实现  

log4j是具体的日志实现,真正负责"写"日志的这个功能  



common logging本身不是log,你可以把它看做是一个日志的接口  

而log4j就是日志的实现  



使用common logging方式实现日志,主要的原因在于可以忽略底层的日志实现,或者说为以后的日志实现库的更换提供透明界面  

你可以考虑下,假设从log4j更换为logback,势必要重写所有原本使用log4j的源代码,而使用common logging的情况下,只需要更换jar包,而不需要对源代码做任何改动

做日志的时候一般是两者一起用，commons-logging工作原理做接口，log4j做实现，应用起来比单独的使用log4j要简单  

commons-logging工作原理:  

1. 首先在classpath下寻找自己的配置文件commons-logging.properties,如果找到,则使用其中定义的Log实现类  
2. 如果找不到commons-logging.properties文件,则在查找是否已定义系统环境变量org.apache.commons.logging.Log,找到则使用其定义的Log实现类 
3. 查看classpath中是否有Log4j的包,如果发现,则自动使用Log4j作为日志实现类 
4. 使用JDK自身的日志实现类(JDK1.4以后才有日志实现类) 
5. 使用commons-logging自己提供的一个简单的日志实现类SimpleLog (以上顺序不保证完全准确,请参考官方文档) commons-logging总是能找到一个日志实现类,并且尽可能找到一个"最合适"的日志实现类. 



### 日志门面

#### commons-logging和slf4j两种日志门面的使用

　　早期[Java](http://lib.csdn.net/base/javase)项目使用最多的日志门面是commons-logging，log4j是推荐的日志实现库，需要的jar包为commons-logging.jar、log4j.jar。   

　　现今java项目推荐的日志门面是slf4j，log4j仍是推荐的日志实现库，需要的jar包为slf4j-api.jar、slf4j-log4j12.jar、log4j.jar，其中绑定包slf4j-log4j12.jar指定了要使用的实现库。   

　　commons-logging存在osgi问题，但早期项目多使用其作为日志门面，为保证兼容仍使用其作为日志门面，但通过slf4j的静态绑定技术来加载具体的日志库log4j，需要的jar包为commons-logging.jar、jcl-over-slf4j.jar、slf4j-api.jar、slf4j-log4j12.jar、log4j.jar，其中jcl-over-slf4j.jar将日志的接口重定向到slf4j。

 	　　使用log4j需先将日志的相关信息在属性文件properties或xml文件配置好，剩下的事情就是在项目中的适当位置打日志。

